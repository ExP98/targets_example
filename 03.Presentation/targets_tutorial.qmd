---
title: "–ü–∞–∫–µ—Ç targets"
author: "–ï–≥–æ—Ä –ì–ª—É—à–∫–æ–≤<br>DTwin"
date: "09-09-2024"
format:
  revealjs:
    slide-number: c/t
    show-slide-number: all
editor: visual
---

## –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ1

-   –ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç —Å –æ–≥—Ä–æ–º–Ω–æ–π –∫–æ–¥–æ–≤–æ–π –±–∞–∑–æ–π: –¥–µ—Å—è—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤, —Ç—ã—Å—è—á–∏ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

-   –ü–æ–º–µ–Ω—è—Ç—å –æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä, "–¥–æ—Å—Ç–∞—Ç—å" —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

-   –ö–∞–∫ *—ç—Ç–æ* –∑–∞–ø—É—Å–∫–∞—Ç—å? –ö–∞–∫ –ø–æ–Ω—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏/—Ñ—É–Ω–∫—Ü–∏—è–º–∏?

## –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ2

-   –†–∞–∑–æ–±—Ä–∞–ª–∏—Å—å —Å–æ —Å–≤—è–∑—è–º–∏: –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ä–∞–∑–Ω—ã—Ö –Ω–∞–±–æ—Ä–æ–≤ –¥–∞–Ω–Ω—ã—Ö

-   –ü–æ–º–µ–Ω—è–ª—Å—è –æ–¥–∏–Ω –∏–∑ –Ω–∞–±–æ—Ä–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏ ‚Äì –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç ***–∑–∞–Ω–æ–≤–æ***?

::: incremental
-   –°–ø—É—Å—Ç—è —á–∞—Å—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞ –≤ –º–∞–ª–µ–Ω—å–∫–æ–º –º–∞–ª–æ–∑–Ω–∞—á–∏–º–æ–º –∫—É—Å–æ—á–∫–µ –∫–æ–¥–∞?

    ![–û—à–∏–±–∫–∞? –°–ø—É—Å—Ç—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è?](Sources/pepe.jpg){fig-align="center" width="300"}
:::

## –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ3

-   –ù–∞—à–ª–∏, –∫–∞–∫—É—é –º–æ–¥–µ–ª—å –Ω–∞–¥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å, –∞ –∫–∞–∫—É—é –Ω–µ –Ω–∞–¥–æ

-   –ö–∞–∫ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–¥–µ–ª–µ–π —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ –º–µ–Ω—è–ª–∏—Å—å, –∫–æ–≥–¥–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è –≤—Ö–æ–¥?

-   –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Ö–æ–¥ –∏–ª–∏ –≤—ã—Ö–æ–¥ —Ç–µ—Ö –∏–ª–∏ –∏–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π?

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### **T A R G E T S**

![Targets ‚Äì –∏ –≤–∞—à–∞ –∂–∏–∑–Ω—å –Ω–µ –±—É–¥–µ—Ç –ø—Ä–µ–∂–Ω–µ–π](Sources/logo.png){fig-align="left"}

## –ú–∞—Ç–µ—Ä–∏–∞–ª—ã

-   [The {targets} R package user manual](https://books.ropensci.org/targets/) ‚Äì –º–∞—Ç–µ—Ä–∏–∞–ª—ã –æ—Ç—Å—é–¥–∞

-   [Targets package on Github](https://github.com/ropensci/targets)

-   Get started with {targets} in 4 minutes {{< video https://vimeo.com/700982360 width="600" height="400" >}}

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

-   –ü—Ä–∏–Ω—Ü–∏–ø —Å—Ö–æ–∂ —Å `makefile`

-   –í –æ—Å–Ω–æ–≤–µ –ª–µ–∂–∏—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—Ç–∏–ª—å (–∫–∞–∫ –∏ –≤–æ –≤—Å–µ–º R)

-   –í–µ—Å—å –∫–æ–¥ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –∫–∞–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–∑–ª–æ–≤ (*aka —Ç–∞—Ä–≥–µ—Ç–æ–≤*), —Å—Ö–æ–¥–Ω—ã—Ö —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –≤—Ö–æ–¥ –∏ –≤—ã—Ö–æ–¥. –¢–∞—Ä–≥–µ—Ç—ã –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞

-   –ö–ª—é—á–µ–≤–æ–π —Ñ–∞–π–ª ‚Äì `_targets.R`. –í –Ω–µ–º —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–∞—Ä–≥–µ—Ç–æ–≤. –í—Å–µ–≥–¥–∞ –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä–Ω–µ –ø–∞–ø–∫–∏

## –¢–∏–ø–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

‚îú‚îÄ‚îÄ \_targets.R

‚îú‚îÄ‚îÄ 01.Data/data.csv

‚îú‚îÄ‚îÄ 02.R/

‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 01.functions.R

‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 02.‚Ä¶

‚îú‚îÄ‚îÄ 03.Targets/

‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 01.tar1.R

‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 02.‚Ä¶

## –° —á–µ–≥–æ –Ω–∞—á–∏–Ω–∞—Ç—å? \[1/2\]

1.  –ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥ –∫–∞–∫ –Ω–µ–∫–æ—Ç–æ—Ä—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π –≤ R (pipeline), —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ø–∞–ø–∫—É —Å –∫–æ–¥–æ–º `/02.R/`

2.  –í—ã–∑–≤–∞—Ç—å `use_targets()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—é—á–µ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ `_targets.R`

3.  –ó–∞–ø–æ–ª–Ω–∏—Ç—å `_targets.R` –Ω—É–∂–Ω—ã–º–∏ —Ç–∞—Ä–≥–µ—Ç–∞–º–∏, –Ω–µ –∑–∞–±—ã–≤ –∑–∞–≥—Ä—É–∑–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ñ—É–Ω–∫—Ü–∏–∏

## –° —á–µ–≥–æ –Ω–∞—á–∏–Ω–∞—Ç—å? \[2/2\]

4.  –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å tar_make(). –í –¥–∞–ª—å–Ω–µ–π—à–µ–º –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≥—Ä–∞—Ñ–∞ —Å–≤—è–∑–µ–π `tar_visnetwork()`[^1]
5.  –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –ø–∞–ø–∫–µ `/_targets/`. –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å—á–∏—Ç–∞–Ω–Ω—ã—Ö —Ç–∞—Ä–≥–µ—Ç–æ–≤: `tar_read(01.My_first_target)`

[^1]: –ò–ª–∏ –ª—É—á—à–µ `tar_visnetwork(targets_only = TRUE)`

## –§–∞–π–ª \_targets.R \[1/2\]

–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π `_targets.R` —Å–æ–¥–µ—Ä–∂–∏—Ç:

-   –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ –ø–∞–∫–µ—Ç—ã

-   `tar_option_set()`

-   `source("01.R/functions.R")`

-   —Å–ø–∏—Å–æ–∫ —Ç–∞—Ä–≥–µ—Ç–æ–≤: `list(tar_target(‚Ä¶), tar_target(‚Ä¶), ‚Ä¶)`

## –§–∞–π–ª \_targets.R \[2/2\]

```{r echo = TRUE, eval = FALSE}
source("01.Targets/01.Libraries.R")
source("01.Targets/02.Functions.R")
source("01.Targets/03.List_of_targets.R")


tar_option_set(format = "qs")
tar_config_set(script = "_targets.R", store = "_targets")


list(
  data_targets,
  ANOVA_targets,
  PCA_targets
)
```

## –§–∞–π–ª 03.List_of_targets.R \[1/2\]

```{r echo = TRUE, eval = FALSE}
PCA_targets <- list(
  tar_target(DT.03.1.PCA_model,
             calculate_PCA_model(DT.01.1.Get_data, scale = TRUE)),

  tar_target(DT.03.2.PCA_summary,
             pca_summary(DT.03.1.PCA_model)),

  tar_target(DT.03.3.PCA_loadings,
             pca_loadings(DT.03.1.PCA_model)),

  tar_target(DT.03.4.PCA_plot,
             plot_to_pdf(DT.03.1.PCA_model, "PCA_components")),

  tar_target(DT.03.5.PCA_less_dim,
             pca_plot_lesser_dim(DT.01.1.Get_data, "Species"))
)
```

## –§–∞–π–ª 03.List_of_targets.R \[2/2\]

```{r echo = TRUE, eval = FALSE}
data_targets <- list(
  tar_target(DT.01.1.Get_data,
             get_data(data = iris, slice_n = NULL)),

  tar_target(DT.01.2.Plot_pairs,
             plot_pairs(DT.01.1.Get_data))
)


ANOVA_targets <- list(
  tar_target(DT.02.1.ANOVA_model,
             calculate_anova_model(DT.01.1.Get_data))
)
```

## –§–∞–π–ª 02.Functions.R \[1/2\]

```{r echo = TRUE, eval = FALSE}
# 1. Getting data           ####
get_data <- function(data = iris, slice_n = NULL) {
  if (!is.null(slice_n)) {
    return(data[slice_n,])
  } else {
    return(data)
  }
}


# 2. Models                 ####
# 2.1 ANOVA model           ####
calculate_anova_model <- function(data_ = iris) {
  r <- aov(lm(data_[, 1] ~ ., data = data_[-1]))
  return(summary(r))
}


# 2.2 PCA model             ####
calculate_PCA_model <- function(data_, scale = TRUE) {
  pca_data <- data_ %>%
    as.data.table() %>%
    copy()
  pca_data <- if (scale) {
    pca_data[, scale(.SD), .SDcols = is.numeric]
  } else {
    pca_data[, .SD, .SDcols = is.numeric]
  }
  return(pca_data %>% princomp())
}
```

## –§–∞–π–ª 02.Functions.R \[1/2\]

```{r echo = TRUE, eval = FALSE}
pca_summary <- \(pca_res) pca_res %>% summary()
pca_loadings <- \(pca_res) pca_res %>% loadings()

plot_to_pdf <- function(pca_res, file_name = "my_plot") {
  pdf(paste0("02.Outputs/", file_name, ".pdf"))
  pca_res %>% plot()
  dev.off()
  return(invisible(NULL))
}


# 2.3 Another PCA model      ####
pca_plot_lesser_dim <- function(data_, factor_var, file_name = "PCA_less_dim") {
  pca_res <- data_ %>%
    as.data.table() %>%
    copy() %>%
    .[, scale(.SD), .SDcols = is.numeric] %>%
    ade4::dudi.pca(scannf=FALSE)

  pdf(paste0("02.Outputs/", file_name, ".pdf"))
  ade4::s.class(pca_res$li, data_[, factor_var])
  dev.off()

  return(invisible(NULL))
}


# 2.4 Another plot functions        ####
plot_pairs <- \(data_, file_name = "pairs_plot") {
  pdf(paste0("02.Outputs/", file_name, ".pdf"))
  data_ %>% pairs()
  dev.off()
  return(invisible(NULL))
}
```

## –ö–æ–º–∞–Ω–¥—ã: `tar_manifest`

-   `tar_manifest()`

    ```{r echo = TRUE, eval = FALSE}
    tar_manifest(fields = all_of("command"))
    ```

    ```         
    # A tibble: 8 √ó 2
      name                 command                                              
      <chr>                <chr>                                                
    1 DT.01.1.Get_data     "get_data(data = iris, slice_n = NULL)"              
    2 DT.03.5.PCA_less_dim "pca_plot_lesser_dim(DT.01.1.Get_data, \"Species\")" 
    3 DT.03.1.PCA_model    "calculate_PCA_model(DT.01.1.Get_data, scale = TRUE)"
    4 DT.01.2.Plot_pairs   "plot_pairs(DT.01.1.Get_data)"                       
    5 DT.02.1.ANOVA_model  "calculate_anova_model(DT.01.1.Get_data)"            
    6 DT.03.2.PCA_summary  "pca_summary(DT.03.1.PCA_model)"                     
    7 DT.03.3.PCA_loadings "pca_loadings(DT.03.1.PCA_model)"                    
    8 DT.03.4.PCA_plot     "plot_to_pdf(DT.03.1.PCA_model, \"PCA_components\")" 
    ```

## –ö–æ–º–∞–Ω–¥—ã: `tar_visnetwork`

-   `tar_visnetwork(targets_only = TRUE)`

    ![](Sources/up_target.png)

## –ö–æ–º–∞–Ω–¥—ã: `tar_visnetwork`

-   `tar_visnetwork(targets_only = TRUE)` –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–¥–Ω–æ–≥–æ –∏–∑ —É–∑–ª–æ–≤

    ![](Sources/outdated_target.png){width="500"}

## –ö–æ–º–∞–Ω–¥—ã: `tar_make`, `tar_read`

-   `tar_make()`

    ```         
    ‚úî skipped target DT.01.1.Get_data
    ‚úî skipped target DT.03.5.PCA_less_dim 
    ‚úî skipped target DT.03.1.PCA_model 
    ‚úî skipped target DT.01.2.Plot_pairs 
    ‚úî skipped target DT.02.1.ANOVA_model
    ‚úî skipped target DT.03.2.PCA_summary
    ‚úî skipped target DT.03.3.PCA_loadings
    ‚úî skipped target DT.03.4.PCA_plot
    ‚úî skipped pipeline [0.188 seconds]
    ```

-   `tar_read(DT.01.1.Get_data)`

    ```         
        Sepal.Length Sepal.Width Petal.Length Petal.Width    Species 
        1            5.1         3.5          1.4         0.2     setosa
        2            4.9         3.0          1.4         0.2     setosa
        3            4.7         3.2          1.3         0.2     setosa
        4            4.6         3.1          1.5         0.2     setosa
    ```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã: `tar_cue`

-   `tar_cue()`

    ```{r echo = TRUE, eval = FALSE}
    tar_target(DT.01.Download_target, download_data(), cue = tar_cue(mode = "always"))
    ```

    ```{r echo = TRUE, eval = FALSE}
    tar_cue(
      mode = c("thorough", "always", "never"),
      command = TRUE,
      depend = TRUE,
      format = TRUE,
      repository = TRUE,
      iteration = TRUE,
      file = TRUE,
      seed = TRUE
    )
    ```

-   Cue mode. If¬†`"thorough"`, all the cues apply unless individually suppressed. If¬†`"always"`, then the target always runs. If¬†`"never"`, then the target does not run unless the metadata does not exist or the last run errored.

## –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π \[1/2\]

-   –î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π `targets` —Å—á–∏—Ç–∞–µ—Ç *hash*: —Ç–∞–∫, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–ª–∞ —Ñ—É–Ω–∫—Ü–∏–∏, –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤–ª–µ—á–µ—Ç –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ö—ç—à–∞

-   –û–±—ä–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º —Å —Ñ–æ—Ä–º–∞—Ç–æ–º —Ö—Ä–∞–Ω–µ–Ω–∏—è, –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Å –ø–æ–º–æ—â—å—é –∞—Ä–≥—É–º–µ–Ω—Ç–∞ `format`¬†—Ñ—É–Ω–∫—Ü–∏–π `tar_target()` –∏–ª–∏ `tar_option_set()`

## –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π \[2/2\]

-   –ù–µ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è -\> [Non-Exportable Objects](https://cran.r-project.org/web/packages/future/vignettes/future-4-non-exportable-objects.html):

    -   base::connection, DBIconnection

    -   cpp, Rcpp, rJava, reticulate, keras, polars, xgboost

    -   parallel, arrow tables, sparklyr

    -   XML

-   –î–ª—è —Ç–∞–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –æ–±—Ö–æ–¥–Ω—ã–µ –ø—É—Ç–∏, –∏–ª–∏ —Å—Ç–æ–∏—Ç –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–Ω—è—Ç—å: –∏–∑–º–µ–Ω–µ–Ω–∏–µ —ç—Ç–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–µ –≤—Å–µ–≥–¥–∞ –≤–ª–µ—á–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–∞–∫–µ—Ç–æ–º `targets`

## –ö–∞–∫–∏–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å tar_target? \[1/2\]

–•–æ—Ä–æ—à–∏–π target –æ–±—ã—á–Ω–æ:

1.  –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫—Ä—É–ø–Ω—ã–π, —á—Ç–æ–±—ã –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ (*skipped*) –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

2.  –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–∞–ª, —á—Ç–æ–±—ã –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–∞—Ä–≥–µ—Ç—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ –¥—Ä—É–≥–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–≤—ã–ø–æ–ª–Ω–∏—Ç—å

## –ö–∞–∫–∏–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å tar_target? \[2/2\]

3.  –ù–µ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã (–Ω–µ –∫–∞—Å–∞–µ—Ç—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, target —Å `tar_target(format = "file")`)
4.  –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ:
    i.  –õ–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å

    ii. –ó–Ω–∞—á–∏–º–æ–µ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞

    iii. –õ–µ–≥–∫–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ —Ñ–∞–π–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é `qsave()`. –°–ª–µ–¥—É–µ—Ç –∏–∑–±–µ–≥–∞—Ç—å –Ω–µ—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (—Å–º. –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Å–ª–∞–π–¥)

## –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ç–≤–ª–µ–Ω–∏–µ

| Dynamic                                 | Static                                              |
|--------------------------------|----------------------------------------|
| Pipeline creates new targets at runtime | All targets defined in advance                      |
| Cryptic target names                    | Friendly target names                               |
| Scales to hundreds of branches          | Does not scale as easily for `tar_visnetwork()` etc |
| No metaprogramming required             | Familiarity with metaprogramming is helpful         |

## –ü–∞–∫–µ—Ç tarchetypes \[1/3\]

-   [–°—Å—ã–ª–∫–∞](https://docs.ropensci.org/tarchetypes/) –Ω–∞ –ø–∞–∫–µ—Ç

-   –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∞—Ä–≥–µ—Ç—ã —Å–ª–æ–∂–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Å –æ—Å–æ–±–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é:

    -   Dynamic branching:

        -   over subsets of data frames: `tar_group_by()`, `tar_group_select()`, etc...

        -   over files: `tar_files()`

        -   dynamic batched replication: `tar_rep()`

        -   dynamic batched replication within static branches for data frames: `tar_map_rep()`

## –ü–∞–∫–µ—Ç tarchetypes \[2/3\]

-   

    -   Static branching:

        -   `tar_combine()`

        -   `tar_map()`

    -   –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∞—Ä–≥–µ—Ç—ã —Å–ª–æ–∂–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Å –æ—Å–æ–±–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é:

        -   —Å–æ–∑–¥–∞–Ω–∏–µ *rmd/quatro*-–æ—Ç—á–µ—Ç–æ–≤: `tar_render(report, "report.Rmd")`

        -   Amazon Web Services (AWS):

            -   `tar_aws_file()`, `tar_aws_parquet()`, etc...

## –ü–∞–∫–µ—Ç tarchetypes \[3/3\]

-   

    -   `tar_url()`, `tar_file()`, `tar_file_fast()`

    -   –û—Å–æ–±—ã–µ –º–æ–¥–µ–ª–∏ –∏ —Ñ–æ—Ä–º–∞—Ç—ã: `tar_keras()`, `tar_torch()`, `tar_format_feather()`

    -   –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –æ–±—ä–µ–∫—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã –Ω–∞–ø—Ä—è–º—É—é: `tar_parquet()`, `tar_fst()`, `tar_fst_dt()`, `tar_fst_tbl()`, `tar_rds()`, `tar_qs()`

## –û—á–∏—Å—Ç–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã—Ö —Ç–∞—Ä–≥–µ—Ç–æ–≤

-   `tar_destroy()` —É–¥–∞–ª—è–µ—Ç `_targets/`

-   `tar_prune()` —É–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –º–µ—Ç–∞–¥–∞—Ç—É, –Ω–µ –æ—Ç–Ω–æ—Å—è—â—É—é—Å—è –∫ —Ç–µ–∫—É—â–µ–º—É –ø–∞–π–ø–ª–∞–π–Ω—É –≤ `_targets.R`

-   `tar_delete()` —É–¥–∞–ª—è–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª –∏–∑ `_targets/objects/` –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞—Ç—ã

-   `tar_invalidate()` —É–¥–∞–ª—è–µ—Ç –º–µ—Ç–∞–¥–∞—Ç—É –∏–∑ —Ç–∞—Ä–≥–µ—Ç—Å–∞, –Ω–æ –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Ç–∞—Ä–≥–µ—Ç–æ–º –¥–∞–Ω–Ω—ã–µ –≤ `_targets/objects/`

-   `tar_meta_delete()` —É–¥–∞–ª—è–µ—Ç `_targets/meta/`

## –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–º–µ—Ç–∫–∏

-   –û–¥–∏–Ω targets –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ (–∫–∞–∫ targets –ø–æ –≥–æ—Ä–æ–¥–∞–º)

-   –î–ª—è –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏ —Å–ª–µ–¥—É–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å *seed*: `tar_option_set(seed = 42)`

-   –ï—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–∏—Å–∞—Ç—å —Å–ø–∏—Å–æ–∫ `tar_target()` –∫–∞–∫ —è—á–µ–π–∫–∏ –≤ `rmd` üò± -\> [Literate programming](https://books.ropensci.org/targets/literate-programming.html)

-   `Targets` –º–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª—è—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—è—Ö -\> [Distributed computing](https://books.ropensci.org/targets/crew.html)

## –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã `targets`

-   –î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã:

    -   `tar_option_set(format = "qs")`

    -   `tar_option_set(memory = "transient", garbage_collection = TRUE)`

## –ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏–µ

–ù–µ —Å—Ç–æ–∏—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å `tar_make()` –≤ –∫—Ä—É–ø–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–µ–∫—Ç—ã 123, 207, 211), –≥–¥–µ —É–∂–µ –∑–∞–ø–∏—Å–∞–Ω `targets`. –≠—Ç–æ –º–æ–∂–µ—Ç —Å—Ç–æ–∏—Ç—å –æ—á–µ–Ω—å –¥–æ–ª–≥–æ –∏ –¥–æ—Ä–æ–≥–æ

## –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ

-   –°–¥–µ–ª–∞—Ç—å `targets` –∏–∑ –∑–∞–¥–∞–Ω–∏—è –ø—Ä–æ `kmeans`. –ú–∏–Ω–∏–º—É–º —á–µ—Ç—ã—Ä–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã—Ö —Ç–∞—Ä–≥–µ—Ç–∞

-   –†–µ–∑—É–ª—å—Ç–∞—Ç:

    -   –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ã–π –∫–æ–¥ —Å `targets`

    -   —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –≥—Ä–∞—Ñ –≤—Å–µ—Ö —É–∑–ª–æ–≤ (*html*)

    -   —É–∫–∞–∑–∞–Ω–∏–µ *(–º–æ–∂–Ω–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º –≤ –∫–æ–¥–µ)*, –≥–¥–µ –ª–µ–∂–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ –∏ –∫–∞–∫ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å
